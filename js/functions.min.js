const currentUrl=window.location.pathname.split("/").pop(),queryString=window.location.search,urlParams=new URLSearchParams(queryString),myId=null===urlParams.get("myId")?"":urlParams.get("myId"),myUrl=null===urlParams.get("myUrl")?"":urlParams.get("myUrl"),mainDiv=document.querySelector("main"),divLateral=createEle("div","div-lateral",["p-2"],"",""),divLatHeader=createEle("div","",["mt-2","mb-2","text-white","text-right"],"","",divLateral);createEle("a","closeLateral","",{href:"#",title:"Fermer cette fenêtre"},'<i class="far fa-times-circle"></i>',divLatHeader);const divLatBody=createEle("div","",["mt-2","mb-2","text-white"],"","",divLateral),divLatH2=createEle("h2","lateralH2","","","",divLatBody);createEle("a","","",{href:"panier.html",title:"Rendez-vous sur la page de votre panier."},"<u>Voir mon panier</u>",divLatBody);const apiUrl="hero"==myUrl?"https://oc-p5-api.herokuapp.com/api/teddies/":"http://localhost:3000/api/teddies/";function displayOneCard(array,options){const newOneCard=createEle("div","mainOneCard",["row","align-items-center","my-5"],"","");switch(options.pend){case"prepend":mainDiv.prepend(newOneCard);break;default:mainDiv.appendChild(newOneCard)}const newImgDiv=createEle("div","",["col-lg-7"],"","",newOneCard);createEle("img","",["img-fluid","rounded","mb-4","mb-lg-0"],{src:array.imageUrl},"",newImgDiv);const newInfoDiv=createEle("div","",["col-lg-5"],"","",newOneCard);createEle("h1","","","","<span>"+array.name+"</span><span>"+displayPrice(array.price/100)+"<span>",newInfoDiv),createEle("p","","","",array.description,newInfoDiv);const newLabelColor=createEle("label","","",{for:"selectColor"},"Couleurs disponibles : ",newInfoDiv),newSelectColor=createEle("select","selectColor","",{name:"selectColor"},"",newLabelColor);for(let ele of array.colors)createEle("option","","","",ele,newSelectColor);const newLabelQty=createEle("label","","",{for:"inputQty"},"Quantité : ",newInfoDiv),newInputQty=createEle("input","inputQty","",{type:"number",name:"inputQty",min:1,value:1},"",newLabelQty);createEle("a","addToCart",["btn","btn-primary"],{"data-id":array._id,"data-price":array.price,"data-action":"addToCart"},'<i class="fas fa-cart-plus"></i> Ajouter au panier',newInfoDiv)}async function getOneProduct(pend){await fetch(apiUrl+myId).then(response=>response.json()).then(nounours=>displayOneCard(nounours,{pend:"prepend"}))}function displayAllCard(array,options){let nbTmp=0,mainProducts=createEle("div","",["row","text-center"],"","",mainDiv);for(let ele of array)if(ele._id!=myId&&nbTmp<options.nbMax){const newArticle=createEle("div","",["col-lg-4","col-md-6","mb-4"],"","",mainProducts),newCard=createEle("div","",["card","h-100"],"","",newArticle);createEle("img","",["card-img-top"],{src:ele.imageUrl,alt:ele.name},"",newCard);const newInfoDiv=createEle("div","",["card-body"],"","",newCard);createEle("h2","",["card-title"],"",ele.name,newInfoDiv),createEle("p","",["card-text"],"",ele.description,newInfoDiv);const newFooter=createEle("div","",["card-footer"],"","",newCard);createEle("a",ele._id,["btn","btn-primary"],{href:"product.html?myId="+ele._id},'<i class="far fa-eye"></i> Découvrir !',newFooter),nbTmp++}}async function getAllProducts(options){await fetch(apiUrl).then(response=>response.json()).then(nounours=>displayAllCard(nounours,{nbMax:""!=options.nbMax?options.nbMax:nounours.length}))}function createEle(_type="div",_id="",_class=[],_attribute=[],_content="",_parent){const e=document.createElement(_type);if(""!=_id&&e.setAttribute("id",_id),Array.isArray(_class)&&0!=_class.length)for(let ele of _class)e.classList.add(ele);if(0!=_attribute.length)for(const[key,value]of Object.entries(_attribute))e.setAttribute(key,value);return""!=_content&&(e.innerHTML=_content),void 0!==_parent&&null!=_parent&&_parent.appendChild(e),e}function displayPrice(_price){const newPrice=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(_price);return newPrice}"panier.html"!=currentUrl&&document.body.prepend(divLateral),document.addEventListener("click",(function(e){"closeLateral"==e.target.id&&(e.preventDefault(),divLateral.classList.remove("active"),console.log("go"))}));